<!DOCTYPE html>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="mducc blog">
  <meta name="keyword" content="mducc, blog">
  
    <link rel="shortcut icon" href="/css/images/Octocat.png">
  
  <title>
    
      PHP – Xử lý JSON | Diary of Duc
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js rel=" stylesheet">
  <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  <script src="/js/qrious.js"></script>
<script src="/js/gitment.js"></script>
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


</head>
<div class="wechat-share">
  <img src="/css/images/Octocat.png">
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <!---<div class="logo"><img src="http://i.imgur.com/ZM2L83y.jpg" width="40px" height="40px"></div> -->
      <span>Diary of Duc</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
  <h2>PHP – Xử lý JSON</h2>
  <p class="post-date">2017-10-25</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><p>JSON (JavaScript Object Noattion) là 1 kiểu dữ liệu dạng text thuần, dạng dữ liệu kiểu <code>key</code> và <code>value</code>, được dùng trong NoSQL Database, được hầu hết các ngôn ngữ lập trình hỗ trợ. Các API hiện nay thường trả về kết quả là một chuỗi JSON, ứng dụng thuộc những nền tảng khác nhau sẽ dùng nó để giao tiếp với nhau.<br><br></p>
<p>Trong PHP, ta có thể đọc, xuất ra 1 JSON bằng cách sử dụng hàm <code>json_decode()</code> và <code>json_encode()</code></p>
<h3 id="Doc-JSON"><a href="#Doc-JSON" class="headerlink" title="Đọc JSON"></a>Đọc JSON</h3><p>Sử dụng hàm <code>json_decode()</code> để đọc JSON.</p>
<p><b>Đọc từ chuỗi:</b></p>
<p>Để chuyển JSON sang dạng mảng ta truyền “true” vào  trong hàm <code>json_decode()</code>.</p>
<p>Vì khóa “devices” có giá trị là mảng nên phải chỉ ra phần từ mảng cần đọc.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">  <span class="variable">$json</span> = <span class="string">'&#123;</span></span><br><span class="line"><span class="string">      "id": "100005950149538",</span></span><br><span class="line"><span class="string">      "name": "Nguyễn Minh Đức",</span></span><br><span class="line"><span class="string">      "birthday": "02/25/1997",</span></span><br><span class="line"><span class="string">      "email": "duc2521997@gmail.com",</span></span><br><span class="line"><span class="string">      "devices": [</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">          "hardware": "iPhone",</span></span><br><span class="line"><span class="string">          "os": "iOS"</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      ]</span></span><br><span class="line"><span class="string">    &#125;'</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="variable">$arrray</span> = json_decode(<span class="variable">$json</span>,<span class="literal">true</span>); //conver to Arrray</span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$arrray</span>[<span class="string">'name'</span>];</span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$arrray</span>[<span class="string">'devices'</span>][0][<span class="string">'hardware'</span>].<span class="string">'&lt;br&gt;'</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="variable">$obj</span> = json_decode(<span class="variable">$json</span>); //conver to Object</span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$obj</span>-&gt;name;</span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$obj</span>-&gt;devices[0]-&gt;hardware;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<p><b>Đọc từ url:</b><br>Đây là url chứa json cần đọc: <a href="https://techitvn.com/temp/json/" target="_blank" rel="noopener">https://techitvn.com/temp/json/</a></p>
<p>Ta sẽ sử dụng hàm <code>file_get_contents()</code> để lấy nội dung từ url.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">  <span class="variable">$get_json</span> = file_get_contents(<span class="string">'https://techitvn.com/temp/json/'</span>);</span><br><span class="line"> </span><br><span class="line">  <span class="variable">$array</span> = json_decode(<span class="variable">$get_json</span>,<span class="literal">true</span>);</span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$array</span>[<span class="string">'name'</span>];</span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$array</span>[<span class="string">'devices'</span>][0][<span class="string">'hardware'</span>].<span class="string">'&lt;br&gt;'</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="variable">$obj</span> = json_decode(<span class="variable">$get_json</span>);</span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$obj</span>-&gt;name;</span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$obj</span>-&gt;devices[0]-&gt;hardware;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<h3 id="Xuat-JSON"><a href="#Xuat-JSON" class="headerlink" title="Xuất JSON"></a>Xuất JSON</h3><p>Sử dụng hàm <code>json_encode()</code> để xuất JSON.</p>
<p>Sử dụng <code>header(‘Content-Type: application/json; charset=UTF-8’)</code> để định dạng hiện thị kiểu JSON ra trình duyệt.</p>
<p><b>Xuất từ mảng:</b></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line">  header(<span class="string">'Content-Type: application/json; charset=UTF-8'</span>); </span><br><span class="line">  <span class="variable">$devices_info</span>[] = array(<span class="string">'hardware'</span>=&gt;<span class="string">'iPhone'</span>,<span class="string">'os'</span>=&gt;<span class="string">'iOS'</span>);</span><br><span class="line">  <span class="variable">$array</span> = array(<span class="string">'id'</span>=&gt;<span class="string">'100005950149538'</span>,<span class="string">'name'</span>=&gt;<span class="string">'Nguyễn Minh Đức'</span>, <span class="string">'birthday'</span>=&gt;<span class="string">'02/25/1997'</span>, <span class="string">'email'</span>=&gt;<span class="string">'duc2521997@gmail.com'</span>,<span class="string">'devices'</span>=&gt;<span class="variable">$devices_info</span>);</span><br><span class="line"> </span><br><span class="line">  <span class="variable">$myJSON</span> = json_encode(<span class="variable">$array</span>);</span><br><span class="line"> </span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$myJSON</span>;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p><b>Xuất từ đối tượng:</b><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line">  header(<span class="string">'Content-Type: application/json; charset=UTF-8'</span>);</span><br><span class="line">  class json&#123; </span><br><span class="line">    public <span class="variable">$id</span>,<span class="variable">$name</span>,<span class="variable">$birthday</span>,<span class="variable">$email</span>,<span class="variable">$devices</span>; </span><br><span class="line">  &#125; </span><br><span class="line">   </span><br><span class="line">  <span class="variable">$devices_info</span>[] = array(<span class="string">'hardware'</span>=&gt;<span class="string">'iPhone'</span>,<span class="string">'os'</span>=&gt;<span class="string">'iOS'</span>);</span><br><span class="line"> </span><br><span class="line">  <span class="variable">$myObj</span> = new json();</span><br><span class="line"> </span><br><span class="line">  <span class="variable">$myObj</span>-&gt;id = <span class="string">"100005950149538"</span>;</span><br><span class="line">  <span class="variable">$myObj</span>-&gt;name = <span class="string">'Nguyễn Minh Đức'</span>;</span><br><span class="line">  <span class="variable">$myObj</span>-&gt;birthday = <span class="string">'02/25/1997'</span>;</span><br><span class="line">  <span class="variable">$myObj</span>-&gt;email = <span class="string">'duc2521997@gmail.com'</span>;</span><br><span class="line">  <span class="variable">$myObj</span>-&gt;devices = <span class="variable">$devices_info</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="variable">$myJSON</span> = json_encode(<span class="variable">$myObj</span>);</span><br><span class="line"> </span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$myJSON</span>;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#php" >
    <span class="tag-code">php</span>
  </a>

  <a href="/tags#json" >
    <span class="tag-code">json</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/ket-noi-mysqli/">
        <span class="nav-arrow">← </span>
        
          PHP – Cơ sở dữ liệu Mysqli
        
      </a>
    
    
      <a class="nav-right" href="/facebook-chatbot/">
        
          PHP – Viết Chatbot Facebook
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    
      <div class="qrcode">
        <canvas id="share-qrcode"></canvas>
        <p class="notice">URL QR</p>
      </div>
    
    <!-- 二维码 END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Doc-JSON"><span class="toc-nav-text">Đọc JSON</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Xuat-JSON"><span class="toc-nav-text">Xuất JSON</span></a></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://localhost:4000/php–xu-ly-json/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

     // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', 'http://file.muyutech.com/error-img.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== 'http://file.muyutech.com/error-img.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()
        
        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })

    // qrcode
    var qr = new QRious({
      element: document.getElementById('share-qrcode'),
      value: document.location.href
    });

    // gitment
    var gitmentConfig = "";
    if (gitmentConfig !== 'undefined') {
      var gitment = new Gitment({
        id: "PHP – Xử lý JSON",
        owner: "",
        repo: "",
        oauth: {
          client_id: "",
          client_secret: ""
        },
        theme: {
          render(state, instance) {
            const container = document.createElement('div')
            container.lang = "en-US"
            container.className = 'gitment-container gitment-root-container'
            container.appendChild(instance.renderHeader(state, instance))
            container.appendChild(instance.renderEditor(state, instance))
            container.appendChild(instance.renderComments(state, instance))
            container.appendChild(instance.renderFooter(state, instance))
            return container;
          }
        }
      })
      gitment.render(document.getElementById('comments'))
    }
  })();
</script>

<script>
  var disqus_shortname = '';
  
  var disqus_url = 'http://localhost:4000/php–xu-ly-json/';
  
  (/*function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }*/)();
</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2019 | Nguyen Minh Duc
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->

<script src="/js/script.js"></script>
  </body>
</html>